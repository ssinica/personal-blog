<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="width=device-width, initial-scale=1.0" name="viewport"><title>Blog | Sergey Sinica</title><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css"><link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"><link rel="stylesheet" href="http://yandex.st/highlightjs/7.5/styles/default.min.css"><link href="/assets/main.css" rel="stylesheet"><link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'></head><body><div class="syn-about-panel"><div class="syn-author-img-w"><a href="/" class="syn-author-img"><img src="https://pbs.twimg.com/profile_images/3762256738/195f3ac721125b7d63e4bfeea53be9d2.jpeg"></img></a></div><div class="syn-author-info"><h3>Hi and welcome to my blog!</h3></div><div class="syn-social"><a href="https://twitter.com/ssinica" target="_blank"><i class="fa fa-twitter-square"></i></a><a href="https://github.com/ssinica" target="_blank"><i class="fa fa-github-square"></i></a><a href="https://plus.google.com/+SergeySinica" target="_blank"><i class="fa fa-google-plus-square"></i></a></div><div class="syn-about-me"><a href="https://twitter.com/ssinica" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @ssinica</a></div><div class="syn-tags-container"><a href="tag_devops.html" class="label syn-label-default">devops <span class="badge">4</span></a><a href="tag_docker.html" class="label syn-label-default">docker <span class="badge">3</span></a><a href="tag_dev.html" class="label syn-label-default">dev <span class="badge">3</span></a><a href="tag_Raspberry_PI.html" class="label syn-label-default">Raspberry PI <span class="badge">2</span></a><a href="tag_aws.html" class="label syn-label-default">aws <span class="badge">2</span></a><a href="tag_AngularJS.html" class="label syn-label-default">AngularJS <span class="badge">1</span></a><a href="tag_howto.html" class="label syn-label-default">howto <span class="badge">1</span></a><a href="tag_RequireJS.html" class="label syn-label-default">RequireJS <span class="badge">1</span></a><a href="tag_CUPS.html" class="label syn-label-default">CUPS <span class="badge">1</span></a><a href="tag_git.html" class="label syn-label-default">git <span class="badge">1</span></a><a href="tag_Docker.html" class="label syn-label-default">Docker <span class="badge">1</span></a><a href="tag_inline_skating.html" class="label syn-label-default">inline skating <span class="badge">1</span></a><a href="tag_terraform.html" class="label syn-label-default">terraform <span class="badge">1</span></a><a href="tag_misc.html" class="label syn-label-default">misc <span class="badge">1</span></a></div></div><div class="syn-main-panel"><div class="syn-blog-item"><h1><a href="/git-branching.html">GIT branching</a> <small class="syn-blog-item-date">10-08-2015</small></h1><div class="syn-post"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>I often see discussions about how to do branching in GIT properly. Rebase or not to rebase. Merge or not to merge. Use strict git-flow or use git-flow but with some exceptions and changes. And so on.</p>
</div>
<div class="paragraph">
<p>I think in all these debates people forget about one most important thing - we, software engineers, should produce <strong>great</strong> software. Of course, you can blindly adopt git-flow or any other methodology and fanatically follow it&#8217;s rules. But I&#8217;m not sure that this will make your software great.</p>
</div>
<div class="paragraph">
<p>To develop great software you should understand - <strong>WHY</strong> you do certain things and <strong>HOW</strong> they affects you. So, if you are using git-flow you should understand WHY you are using exactly this methodology (because it is very popular - incorrect answer) and HOW it impacts your development process and your product.</p>
</div>
<div class="paragraph">
<p>For example. I worked in a big team. We had a lot of commits per deploy. The system was big, important and it generated money, so it was extremely important to deploy only <strong>CLEAN</strong> and <strong>VERIFIED</strong> code. Of course we have had automatic tests, manual tests, code reviews and leads all the time, in "daemon" mode, reviewed commits in master. Also if something very bad happened in PROD it was vital to find and fix problem quickly. So we must were able to clearly see which commits where added to particular deploy.</p>
</div>
<div class="paragraph">
<p>When we switched from SVN to GIT, we initially did not have any rules HOW to do branching. But very quickly someone did mistake during merge and committed BAD code to master branch and this code hit PROD very badly. Leads spent few hours trying to understand in GIT commits history when things went wrong. Eventually problem was found and fixed, but it was not easy.</p>
</div>
<div class="paragraph">
<p>After this incident we invented code reviews and one rule for branching and commits:</p>
</div>
<div class="paragraph">
<p><strong>"NO MATTER THAT, BUT COMMITS HISTORY IN MASTER BRANCH MUST BE CLEAN AND LINEAR"</strong>.</p>
</div>
<div class="paragraph">
<p>Starting from that point we understood <strong>HOW</strong> we should do branching to produce great software and <strong>WHY</strong>.</p>
</div>
<div class="paragraph">
<p>I really liked the idea with linear commits history in master branch and from then I tried to adapt it in all my next projects and jobs. But, unfortunately, not always this simple idea got positive response from other developers and managers. I think this happened because projects were relatively small - few developers and few dozens commits per deploy. Yes, sometimes it was tricky to understand from commits history when code was changed and who changed it first and merged with bug, but seems like this problem just was not big enough.</p>
</div>
<div class="paragraph">
<p>In conclusion to make my point more clear simple example:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_branch_per_feature_with_simple_merge">Branch per feature with simple merge</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>mkdir branches &amp;&amp; cd branches &amp;&amp; git init

echo "111" &gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "111"

git checkout -b 222 &amp;&amp; echo "222" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "222"
git checkout master
git checkout -b 333 &amp;&amp; echo "333" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "333"
git checkout master

echo "444" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "444"
echo "555" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "555"

git log --graph --oneline
* 039460b 555
* 4700e87 444
* 89d4df7 111

git checkout 222 &amp;&amp; echo "222-2" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "222-2"
git merge master
// fix conflicts
git add * &amp;&amp; git commit -m "222-2"
git checkout master &amp;&amp; git merge 222

git log --graph --oneline
*   9e8ce3a 222-2
|\
| * 039460b 555
| * 4700e87 444
* | f08bc09 222-2
* | 041d76d 222
|/
* 89d4df7 111

git checkout 333 &amp;&amp; echo "333-2" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "333-2"
echo "333-3" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "333-3"
git merge master
// fix conflicts
git add * &amp;&amp; git commit -m "333-3"
git checkout master &amp;&amp; git merge 333

git log --graph --oneline
*   187de6d 333-3
|\
| *   9e8ce3a 222-2
| |\
| | * 039460b 555
| | * 4700e87 444
| * | f08bc09 222-2
| * | 041d76d 222
| |/
* | be95c49 333-3
* | e62e0d1 333-2
* | 15b92cc 333
|/
* 89d4df7 111</pre>
</div>
</div>
<div class="paragraph">
<p>You see - just few feature branches merged to master branch. This is the simplest possible case, but already commits history is messy.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_branch_per_feature_with_squash_merge">Branch per feature with squash merge</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>mkdir branches &amp;&amp; cd branches &amp;&amp; git init

echo "111" &gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "111"

git checkout -b 222 &amp;&amp; echo "222" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "222"
git checkout master
git checkout -b 333 &amp;&amp; echo "333" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "333"
git checkout master

echo "444" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "444"
echo "555" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "555"

git checkout 222 &amp;&amp; echo "222-2" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "222-2"
git merge master
// fix conflicts
git add * &amp;&amp; git commit -m "222-2"
git checkout master
git merge --squash 222
git add * &amp;&amp; git commit -m "222-2"

git log --graph --oneline
* 77db5e6 222-2
* 45aff46 555
* 0dbe89b 444
* d8f1793 111

git checkout 333 &amp;&amp; echo "333-2" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "333-2"
echo "333-3" &gt;&gt; 111.txt &amp;&amp; git add * &amp;&amp; git commit -m "333-3"
git merge master
// fix conflicts
git add * &amp;&amp; git commit -m "333-3"
git checkout master &amp;&amp; git merge --squash 333
git add * &amp;&amp; git commit -m "333-2"

git log --graph --oneline
* 8bced4a 333-2
* 77db5e6 222-2
* 45aff46 555
* 0dbe89b 444
* d8f1793 111</pre>
</div>
</div>
<div class="paragraph">
<p>The result is the same. But now we have linear and clean history. If you will tag commits before deploy, it will be trivial to review history of changes and track problems.</p>
</div>
<div class="paragraph">
<p>Of course, you will say - with squash we loss some information about commits during feature development. Yes. But if you really need that history, you can always do multiple commits after squash merge.</p>
</div>
<div class="paragraph">
<p>This is only one way how you can achieve linear commits history in master branch. You can try interactive rebase, deleting unnecessary branches after merge, etc&#8230;. Important is that now you understand which result you want to have and WHY. Now HOW question is really simple to answer.</p>
</div>
</div>
</div></div><div class="syn-blog-item-tags"><a href="tag_git.html" class="label syn-label-default">git</a><a href="tag_dev.html" class="label syn-label-default">dev</a></div><div class="syn-share-btns"><a href="https://twitter.com/share" data-url="http://blog.sinica.me/git-branching" class="twitter-share-button" data-via="ssinica">Tweet</a><div class="g-plus" data-href="http://blog.sinica.me/git-branching" data-action="share"></div></div></div><div class="syn-blog-item-delim"><span>54 days</span></div><div class="syn-blog-item"><h1><a href="/mount_ebs_volume_ec2.html">Mount EBS volume in EC2 (Ubuntu 14.04)</a> <small class="syn-blog-item-date">07-01-2015</small></h1><div class="syn-post"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>First, find block device you want to mount:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>lsblk</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s assume it is <strong>xvdb</strong>. In this case:</p>
</div>
<div class="paragraph">
<p>Check if block device is formated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>file -s /dev/xvdb</pre>
</div>
</div>
<div class="paragraph">
<p>If in output you see <strong>data</strong>, then you should format device:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mkfs -t ext4 /dev/xvdb</pre>
</div>
</div>
<div class="paragraph">
<p>Mount block device to <strong>/data</strong> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mount /dev/xvdb /data</pre>
</div>
</div>
<div class="paragraph">
<p>To automatically mount block device on system start:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>echo '/dev/xvdb       /data   ext4    defaults,nofail        0       2' &gt;&gt; /etc/fstab</pre>
</div>
</div>
<div class="paragraph">
<p>Check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mount -a</pre>
</div>
</div>
</div>
</div></div><div class="syn-blog-item-tags"><a href="tag_aws.html" class="label syn-label-default">aws</a><a href="tag_dev.html" class="label syn-label-default">dev</a></div><div class="syn-share-btns"><a href="https://twitter.com/share" data-url="http://blog.sinica.me/mount_ebs_volume_ec2" class="twitter-share-button" data-via="ssinica">Tweet</a><div class="g-plus" data-href="http://blog.sinica.me/mount_ebs_volume_ec2" data-action="share"></div></div></div><div class="syn-blog-item-delim"><span>54 days</span></div><div class="syn-blog-item"><h1><a href="/bugs_hunting_best_practices.html">Bugs hunting. Best practices.</a> <small class="syn-blog-item-date">09-10-2014</small></h1><div class="syn-post"><div class="sect1">
<h2 id="_so_you_found_a_bug">So you found a bug&#8230;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sorry guys for maybe not very correct post title. This story will be not actually about bugs hunting, but mostly about that to do after you found the bug.</p>
</div>
<div class="paragraph">
<p>So you found a bug or got 500 Server Error exception. This is your project, but you are not only person working on it. What you should and should not to do?</p>
</div>
<div class="paragraph">
<p><span class="label label-success">Rule 1</span>  <strong>Do not copy/paste exception to team chat immediately!</strong></p>
</div>
<div class="paragraph">
<p>This is really bad tone. Instead try to track the exact place where exception was born. In most cases it will be really easy.</p>
</div>
<div class="paragraph">
<p>Now look around. Do you understand that caused the exception? Can you fix it quickly and you are confident your fix will be correct? Super!</p>
</div>
<div class="paragraph">
<p><span class="label label-success">Rule 2</span>  <strong>Go ahead and just fix it!</strong></p>
</div>
<div class="paragraph">
<p>If you are not confident or you do not understand that happened, check commits history and find the person who last worked on this code. Contact that person and show him the problem. Ask him for help in resolving. In 99% times the person, if this is really his bug, will re-take the bug from you and will fix it himself.</p>
</div>
<div class="paragraph">
<p>You see, you do not need to paste the exception in team chat in most cases.</p>
</div>
<div class="paragraph">
<p>There are only <strong>3 excuses</strong> to do this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>This is a critical production bug and you need immediate attention and help.</p>
</li>
<li>
<p>You can not locate the person responsible for the bug.</p>
</li>
<li>
<p>You have a solution for the bug and you want to show your team this problem as example of that can happen and how to avoid it. So if the bug can help someone in the team better understand the system and prevent similar bugs in future, then you should paste it in team chat with explanation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And last but not least. About copying exception for pasting to the chat.</p>
</div>
<div class="paragraph">
<p><span class="label label-success">Rule 3</span>  <strong>Text of exception should clearly highlight the problem and point to the place exception happened.</strong></p>
</div>
<div class="paragraph">
<p>So if there is a SQL syntax exception, do not paste just plain SQL, but also include stack trace of DAO or Service method which calls this SQL.</p>
</div>
<div class="paragraph">
<p>You may want to paste the <strong>full stack trace</strong> just to be sure you have included all that is important. <strong>Do not do this!</strong></p>
</div>
<div class="paragraph">
<p>If you are Java guy, then you know Java stack traces can be very, very long and meaningless. So just do not paste all this proxy/filter chaining methods. Look at the bottom of the stack trace. Usually the helpful part can be found there.</p>
</div>
<div class="paragraph">
<p>So do not disturb your team with super easy to fix NPE. Do not point to someone&#8217;s mistake publicly and loudly - people hate this.</p>
</div>
<div class="paragraph">
<p>And happy hunting!</p>
</div>
</div>
</div></div><div class="syn-blog-item-tags"><a href="tag_dev.html" class="label syn-label-default">dev</a></div><div class="syn-share-btns"><a href="https://twitter.com/share" data-url="http://blog.sinica.me/bugs_hunting_best_practices" class="twitter-share-button" data-via="ssinica">Tweet</a><div class="g-plus" data-href="http://blog.sinica.me/bugs_hunting_best_practices" data-action="share"></div></div></div><div class="syn-blog-item-delim"><span>157 days</span></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>var Blog = {};Blog.GA_TRACKING_ID = 'UA-29721532-1'; Blog.GA_DOMAIN = 'sinica.me';</script><script src="/assets/main.js"></script></body></html>